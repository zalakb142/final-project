<!DOCTYPE html>
<html>
    <head>
        <title>Weather Map</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.6/dist/MarkerCluster.css" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.0.6/dist/MarkerCluster.Default.css">
        <script src="https://unpkg.com/leaflet.markercluster@1.0.6/dist/leaflet.markercluster-src.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/OverlappingMarkerSpiderfier-Leaflet/0.2.6/oms.min.js"></script>
        <script   src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/css/bootstrap-datepicker3.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src='https://kit.fontawesome.com/1c6e696317.js' crossorigin='anonymous'></script>
        <!-- <script src="https://code.jquery.com/jquery-3.6.0.js" type="text/javascript"></script>
        <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js" type="text/javascript"></script>
        <script src="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
        <style>
             body{
             padding:0;
             margin:0;
             }
           html,body,#map{ height: 100%; width:100%}

           .row {
                padding: 5px;
                padding-bottom: 5px;
                background-color: #f2eec7;
                text-align:center;
            }
            /* reference:https://www.w3schools.com/css/css_padding.asp */
            div .Headingstyle {
                font-size: 40px;
                color: black;
                font-weight: bold;
                text-align: center;
            }

            .buttonStyle{
              background-color: #58a2a3;
              font-family: cursive;
              border:none;
              font-weight:bold;
              /* margin-left: 10%;   */
              margin-right:10%;
              border-radius: 10px;
              color: white;
              padding: 4px 8px;
              text-decoration: none;
              cursor: pointer;
              width:auto;
              height:auto
            }

            .buttonStyle:hover{
                background-color: #0f4a4f;
                color:#73f0d3;
            }

            /* reference:https://www.w3schools.com/css/css_form.asp */
            /* reference:https://www.w3schools.com/css/tryit.asp?filename=trycss_buttons_round */


           .legend { text-align: left; line-height: 20px; color: #555; background-color: white; } .legend i { width: 25px; height: 20px; float: left; opacity: 1; }

           /* reference: https://groups.google.com/g/google-maps-js-api-v3/c/H6TvI6wgYkU */

           .mapdisplay {
            height: 500px;
            background-position: center;
            /* background-repeat: no-repeat; */
            background-size: cover;
            position: relative;
            opacity: 0.9;
            }
            .weather-text {
            text-align: center;
            position: absolute;
            bottom: 0px;
            right: 0px;
            font-size: 10px;
            /* transform: translate(-50%, -50%);  */
            color: black;
            background-color: white;
            }

            /* reference(using image for cover):https://www.w3schools.com/cssref/tryit.asp?filename=trycss3_background_hero
            https://www.w3schools.com/css/tryit.asp?filename=trycss_image_text_bottom_right */


            .popupBackground,.popupBackground2 {
            background-color: #575b5c;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            opacity: 0.9;
            display: none;
            justify-content: center;
            align-items: center;
            }


            .popupwindow-contents,.popupwindow-contents2{
            height: 550px;
            width: 400px;
            background-color: #e6ab77;
            text-align: center;
            padding-top:0px;

            position: relative;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: left;
            }

            .popupBackground3,.popupBackground4 {
                background-color: #575b5c;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                opacity: 0.9;
                display: none;
                justify-content: center;
                align-items: center;
            }

            .popupwindow-contents3{
                height: 450px;
                width: 85%;
                background-color: #e6ab77;
                text-align: center;
                padding-top:0px;

                position: relative;
                border-radius: 20px;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: left;
            }

            .popupwindow-contents4{
                height: 600px;
                width: 350PX;
                background-color: #e6ab77;
                text-align: center;
                padding-top:0px;

                position: relative;
                border-radius: 20px;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: left;
            }




            .BoxIcon {
            height: 150px;
            width: 150px;
            padding-left:50px;
            color: yellow;
            border-radius: 20%;
            font-size: 115px;
            align-items: center;
            align-content: center;
            text-align: center;

            }

            .popuptext{
            font-family: cursive;
            font-size: 20px;
            color: black;
            font-weight: bold;
            text-align: left;
            }




            /* reference:https://www.w3schools.com/css/tryit.asp?filename=trycss_form_button */


            .closeWindow,.closeWindow2 {
            position: absolute;
            top: 0;
            right: 15px;
            font-size: 30px;
            color: black;
            transform: rotate(45deg);
            cursor: pointer;

            }
           

            .popuptexttable{
                font-family: cursive;
                font-size: 15px;
                color: black;
                font-weight: bold;
                text-align: left;
            }




            /* reference:https://www.w3schools.com/css/tryit.asp?filename=trycss_form_button */


            .closeWindow3,.closeWindow4 {
                position: absolute;
                top: 0;
                right: 15px;
                font-size: 30px;
                color: black;
                transform: rotate(45deg);
                cursor: pointer;

            }
            .form{
                border: 1px solid #58a2a3;
                border-radius:5%;
                width:10%;
                height:20px; 
            }
            .form:hover{
                background-color: #d8f2f0;

            }

            .form2{
                border: 1px solid #58a2a3;
                border-radius:5%;
                width:20%;
                height:20px; 
            }
            .form2:hover{
                background-color: #d8f2f0;

            }

            
            .table {
            border: 0px solid gray;
            border-collapse: collapse;
            margin-left:2px;
            width:auto;
            height:auto;
            font-size:10px;
            }

            .table th {
            border: 0px solid white;
            padding: 5px;
            text-align: center; 
            font-family: cursive;
            color: white;
            font-weight: bold;
            font-size: 20px;         
           
            }

            .table td {
            border: 0px solid white;
            padding: 5px;
            text-align: center;            
            font-family: cursive;
            color: white;
            font-weight: normal;
            font-size: 15px;}
            

            .table td:hover {
            background-color:#f78534;
            }

            .fontstyle{
                       
            font-family: cursive;
            color: #f78534;
            font-weight: bold;
            font-size: 15px;}


            .grid{
               
               display: grid;
               padding:1px;
               grid-column-gap:1px;
               grid-row-gap:1px;
               grid-template-columns:200px 250px 350px auto;

             }

             .grid-item {               
               font-size:16px;
               padding:20px;
               text-align: center;
             }

            

        </style>
   

            
     </head>
     <body>
        <div class="container-fluid">
			<div class="row">
				<span class="Headingstyle">Weather API</span>
				<br><br>
          
                <a href="{{url_for('index')}}"><button   class="buttonStyle">Home&nbsp&nbsp<i class="fa fa-home"></i></button></a>&nbsp&nbsp               
                 <!-- https://www.w3schools.com/w3css/w3css_icons.asp -->
                 <button id = "dailyforcast" class="buttonStyle" onclick="DailyForcast(); return false;">Next 7 Days Forecast&nbsp&nbsp<i class="fas fa-cloud-sun"></i></button>&nbsp&nbsp&nbsp
                <button id = "hourlyforcast" class="buttonStyle" onclick="hourlyForcast(); return false;">Next 48 hours forecast&nbsp&nbsp<i class="fas fa-cloud-sun"></i></button>                		
				<button id = "Query" class="buttonStyle" onclick="SearchByCityname(); return false;">Current Weather (City)<i class="fas fa-cloud-sun"></i></button>
                <br><br>
                <p style="margin-right:68%" >
                <button  id = "Search" class="buttonStyle" onclick="SearchByLocation(); return false;">Current Weather&nbsp&nbsp<i class="fas fa-cloud-sun"></i></button>
                <button   style="margin-right:9%" class="buttonStyle">Contact Us&nbsp&nbsp<i class="fa fa-envelope"></i></button>
                <p>
				<!-- https://www.w3schools.com/icons/tryit.asp?filename=tryicons_fa-envelope -->
				
			</div>
		</div>


        <!-- datepiker Reference: https://www.youtube.com/watch?v=L91zKGRaRkM -->
        <br>

        <span class="fontstyle" type="text" name="currenttime" id="currenttime"></span>
        <br>

        <form>
            <input type="text" name="lat" id="lat" placeholder="Latitude" class="form">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            <input type="text" name="long" id="long" placeholder="Longitude" class="form">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            
            <input type="text" name="CityN" id="CityN" placeholder="City" class="form">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            <input type="text" name="hour" id="hour" placeholder="1~48" class="form">&nbsp&nbsp
            <button id = "Clear" class="buttonStyle" onclick="ClearSection(); return false;">New Search</button>
        </form>

         <!-- reference(for passing form value):https://stackoverflow.com/questions/21397743/passing-html-input-value-as-a-javascript-function-parameter -->
         <!-- reference(how to avoid automatic page refresh while using onclick function)https://stackoverflow.com/questions/4012277/page-refreshes-automatically-onclick -->
         <div id="map" class="mapdisplay"></div>
         <div class="popupBackground">
            <div class="popupwindow-contents">

                <div class="closeWindow">+</div>
                <br><br><br>

                <form name="Search" id ="Search" action="">

                    <!-- <var>iclass</var>="<a id="icontype"></a>" -->

                    <div class="BoxIcon"><img id="iconImg" src="" /></div>
                    <!-- reference(for how to pass javascript image source to html):https://stackoverflow.com/questions/55123762/declare-a-variable-and-use-it-in-html -->

                    <h5 class="popuptext">Latitude:<span style="color:white" id="LocLatitude"></span><span style="color:white">°</span>&nbsp&nbsp&nbspLongitude:<span style="color:white" id="LocLongitude"></span><span style="color:white">°</span></h5>
                    <h5 class="popuptext"><span style="color:white" id="loccondition"></span></h5>
                    <h5 class="popuptext">Temperature <i class="fas fa-temperature-high"></i>:&nbsp<span style="color:white" id="locTemp"></span><span style="color:white">°C</span></h5>
                    <h5 class="popuptext">Pressure <i class="fas fa-temperature-low"></i>:&nbsp<span style="color:white" id="locPressure"></span><span style="color:white">hpa</span></h5>
                    <h5 class="popuptext">Wind <i class="fas fa-wind"></i>:&nbsp<span style="color:white" id="locwind"></span><span style="color:white">m/s</span></h5>
                    <h5 class="popuptext">Humidity <i class="fas fa-water"></i>:&nbsp<span style="color:white" id="lochumidity"></span><span style="color:white">%</span></h5>
                    <h5 class="popuptext">Visibility<i class="fas fa-rainbow"></i>:&nbsp <span style="color:white" id="locvisibility"></span><span style="color:white">m</span></h5>


                        <!-- <div class="Box-contents">
                            <i class="far fa-sun"></i>
                         </div> -->

                </form>

            </div>
        </div>
       <!-- reference(for how to add a popup window by click and how to close a popup window is learned from):https://www.youtube.com/watch?v=gLWIYk0Sd38&t=191s
    and https://www.codinglabweb.com/2020/12/animated-alert-box-using-html-css-only.html(by By CodingNepal - www.codingnepalweb.com)-->

    <div class="popupBackground2">
        <div class="popupwindow-contents2">

            <div class="closeWindow2">+</div>
            <br><br><br>

            <form name="Query" id ="Query" action="">

                <!-- <var>iclass</var>="<a id="icontype"></a>" -->

                <div class="BoxIcon"><img id="iconImgC" src="" /></div>
                <!-- reference(for how to pass javascript image source to html):https://stackoverflow.com/questions/55123762/declare-a-variable-and-use-it-in-html -->

                <h5 class="popuptext">City:<span style="color:white" id="loccitynameC"></span></h5>
                <h5 class="popuptext"><span style="color:white" id="locconditionC"></span></h5>
                <h5 class="popuptext">Temperature <i class="fas fa-temperature-high"></i>:&nbsp<span style="color:white" id="locTempC"></span><span style="color:white">°C</span></h5>
                <h5 class="popuptext">Pressure <i class="fas fa-temperature-low"></i>:&nbsp<span style="color:white" id="locPressureC"></span><span style="color:white">hpa</span></h5>
                <h5 class="popuptext">Wind <i class="fas fa-wind"></i>:&nbsp<span style="color:white" id="locwindC"></span><span style="color:white">m/s</span></h5>
                <h5 class="popuptext">Humidity <i class="fas fa-water"></i>:&nbsp<span style="color:white" id="lochumidityC"></span><span style="color:white">%</span></h5>
                <h5 class="popuptext">Visibility<i class="fas fa-rainbow"></i>:&nbsp <span style="color:white" id="locvisibilityC"></span><span style="color:white">m</span></h5>




            </form>

        </div>
    </div>


    <div class="popupBackground3">
        <div class="popupwindow-contents3">
 
            <div class="closeWindow3">+</div>
            <br><br><br>
           
 
            <table name="dailyforcast" id ="dailyforcast" action="" class="table">
            <tr class="th">
              <th ></th>
              <th >Day1</th>
              <th>Day2</th>
              <th>Day3</th>
              <th>Day4</th>
              <th>Day5</th>
              <th>Day6</th>
              <th>Day7</th>
            </tr>
              <tr class="td">
                <td></td>
                <td><img id="iconImg1" src="" /></td>
                <td><img id="iconImg2" src="" /></td>
                <td><img id="iconImg3" src="" /></td>
                <td><img id="iconImg4" src="" /></td>
                <td><img id="iconImg5" src="" /></td>
                <td><img id="iconImg6" src="" /></td>
                <td><img id="iconImg7" src="" /></td>                    
            </tr>  
            <tr class="td">
                <td class="popuptexttable"><span style="color:white" id="unit"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day1"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day2"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day3"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day4"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day5"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day6"></span></td>
                <td class="popuptexttable"><span style="color:white" id="day7"></span></td>                    
            </tr>               
                               
        
           
         </table>
 
          
 
        </div>
    </div>

    <div class="popupBackground4">
        <div class="popupwindow-contents4">
  
            <div class="closeWindow4">+</div>
            <br><br><br>
           
  
            <form  name="hourlyforcast" id ="hourlyforcast" action="">
              <h2 class="popuptext">The weather forcast in <span style="color:white" id="FHhournum"></span> hours</h2>
            
              <div class="BoxIcon"><img id="iconImgH" src="" /></div>
              <!-- reference(for how to pass javascript image source to html):https://stackoverflow.com/questions/55123762/declare-a-variable-and-use-it-in-html -->
  
              <h5 class="popuptext">Latitude:<span style="color:white" id="HRLatitude"></span><span style="color:white">°</span>&nbsp&nbsp&nbspLongitude:<span style="color:white" id="HRLongitude"></span><span style="color:white">°</span></h5>
              <h5 class="popuptext"><span style="color:white" id="FHcondition"></span></h5>
              <h5 class="popuptext">Temperature <i class="fas fa-temperature-high"></i>:&nbsp<span style="color:white" id="FHTemp"></span><span style="color:white">°C</span></h5>
              <h5 class="popuptext">Pressure <i class="fas fa-temperature-low"></i>:&nbsp<span style="color:white" id="FHPressure"></span><span style="color:white">hpa</span></h5>
              <h5 class="popuptext">Wind <i class="fas fa-wind"></i>:&nbsp<span style="color:white" id="FHwind"></span><span style="color:white">m/s</span></h5>
              <h5 class="popuptext">Humidity <i class="fas fa-water"></i>:&nbsp<span style="color:white" id="FHhumidity"></span><span style="color:white">%</span></h5>
              <h5 class="popuptext">Visibility<i class="fas fa-rainbow"></i>:&nbsp <span style="color:white" id="FHvisibility"></span><span style="color:white">m</span></h5>
              <h5 class="popuptext">Uvi<i class="far fa-sun"></i>:&nbsp<span style="color:white" id="FHuvi"></span></h5>
  
  
          </form>                  
        
           
         </table>
  
          
  
        </div>
    </div>


  
        <script type="text/javascript">
           
            // datepiker Reference:https://stackoverflow.com/questions/37124277/change-the-date-format-to-yyyy-mm-dd-in-datepicker
            //datepiker Reference: https://www.youtube.com/watch?v=L91zKGRaRkM
            
                   

            var map = L.map('map').setView([51.055, -114.060], 2);
            var oms = new OverlappingMarkerSpiderfier(map);

            mapLink ='<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>';

            var defaultmap =L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            // Reference: https://leafletjs.com/examples/quick-start/
            // Reference: http://bl.ocks.org/d3noob/7654694

            // L.mapbox.accessToken = 'pk.eyJ1IjoiemFsYWtiMTQiLCJhIjoiY2t6dTBzYThuMWo5djJ3cnh3bDl3dGNjeSJ9.gidlTMdQBoOF23iwCpBHFg';

            // var satellite = L.mapbox.styleLayer('mapbox://styles/zalakb14/ckzwvwiyf005x14quhrk8p3yg');
          

            var satellite = L.tileLayer('https://api.mapbox.com/styles/v1/zalakb14/ckzwvwiyf005x14quhrk8p3yg/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                attribution: '© <a href="https://www.mapbox.com/contribute/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
                maxZoom: 18,                
                tileSize: 512,
                zoomOffset: -1,
                accessToken: 'pk.eyJ1IjoiemFsYWtiMTQiLCJhIjoiY2t6dTBzYThuMWo5djJ3cnh3bDl3dGNjeSJ9.gidlTMdQBoOF23iwCpBHFg'
            });









            var PressureLayer=L.tileLayer(
              'https://tile.openweathermap.org/map/pressure_new/{z}/{x}/{y}.png?appid=499c514452d1ec2dbb3be7eaa86fda44', {
                attribution: '&copy; <a href="https://openweathermap.org/">OpenWeather</a>',
                maxZoom: 18,                
            });
            
            var TemperatureLayer=L.tileLayer(
              'https://tile.openweathermap.org/map/temp_new/{z}/{x}/{y}.png?appid=499c514452d1ec2dbb3be7eaa86fda44', {
                attribution: '&copy; <a href="https://openweathermap.org/">OpenWeather</a>',
                maxZoom: 18,
            });

            var cloudsLayer=L.tileLayer(
              'https://tile.openweathermap.org/map/clouds_new/{z}/{x}/{y}.png?appid=499c514452d1ec2dbb3be7eaa86fda44', {
                attribution: '&copy; <a href="https://openweathermap.org/">OpenWeather</a>',
                maxZoom: 18,
            });

            var PrecipitationLayer=L.tileLayer(
              'https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=499c514452d1ec2dbb3be7eaa86fda44', {
                attribution: '&copy; <a href="https://openweathermap.org/">OpenWeather</a>',
                maxZoom: 18,
            });

            var WindSpeedLayer=L.tileLayer(
              'https://tile.openweathermap.org/map/wind_new/{z}/{x}/{y}.png?appid=499c514452d1ec2dbb3be7eaa86fda44', {
                attribution: '&copy; <a href="https://openweathermap.org/">OpenWeather</a>',
                maxZoom: 18,
            });
            //reference:https://openweathermap.org/api/weathermaps
            //reference:https://github.com/owm-inc/VANE-intro/blob/master/apps/leaflet-owm.html
           

            var TempHeat = L.tileLayer('https://api.mapbox.com/styles/v1/feinakathy/cl23zj8hw001115qhtnnv60xn/tiles/{z}/{x}/{y}?access_token={accessToken}', {
                attribution: '© <a href="https://www.mapbox.com/contribute/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> © <a href="https://www.visualcrossing.com">Visual Crossing Corporation</a>',
                maxZoom: 18,                
                tileSize: 512,
                zoomOffset: -1,
                accessToken: 'pk.eyJ1IjoiZmVpbmFrYXRoeSIsImEiOiJja3pybHV3bmQxNHRmMm9uYWJyMWM1cWVlIn0.j5QRbSRs2rZxiYw_1b5Hfw'
            });

     

     
            function rgbaToHex(rgba){
                var rgba = rgba.replace(/^rgba?\(|\s+|\)$/g, '').split(',');
                var hex = `#${((1 << 24) + (parseInt(rgba[0]) << 16) + (parseInt(rgba[1]) << 8) + parseInt(rgba[2])).toString(16).slice(1)}`;
                return hex
            } 
            //reference:         




            function getColor(d) {
                return d > 1080 ? rgbaToHex('rgba(198,0,0,0.2)') :
                    d > 1060 ? rgbaToHex('rgba(243,54,59,0.2)') :
                    d > 1040  ? rgbaToHex('rgba(251,85,21,0.2)') :
                    d > 1020  ? rgbaToHex('rgba(240,184,0,0.2)') :
                    d > 1010   ? rgbaToHex('rgba(176,247,32,0.2)') :
                    d > 1000  ? rgbaToHex('rgba(141,231,199,0.2)') :
                    d > 980   ? rgbaToHex('rgba(75,208,214,0.2)') : 
                    d > 960   ? rgbaToHex('rgba(0,170,255,0.2)') :
                    rgbaToHex('rgba(0,115,255,0.2)');
                   
            }
            
            
            function getColor_T(d) {
                return d === -65 ? rgbaToHex('rgba(130,22,146,1)') :
                    d === -55 ? rgbaToHex('rgba(130,22,146,1)') :
                    d === -45  ? rgbaToHex('rgba(130,22,146,1)') :
                    d === -40  ? rgbaToHex('rgba(130,22,146,1)') :
                    d === -30   ? rgbaToHex('rgba(130,87,219,1)') :
                    d === -20  ? rgbaToHex('rgba(32,140,236,1)') :
                    d === -10   ? rgbaToHex('rgba(32,196,232,1)') : 
                    d === 0   ? rgbaToHex('rgba(35,221,221,1)') :
                    d === 10   ? rgbaToHex('rgba(194,255,40,1)') :
                    d === 20   ? rgbaToHex('rgba(255,240,40,1)') :
                    d === 25   ? rgbaToHex('rgba(255,194,40,1)') :
                    rgbaToHex('rgba(252,128,20,1)');
                   
            } 


            function getColor_C(d){
                return d === 0 ? rgbaToHex('rgba(255, 255, 255, 0.0)') :
                    d === 10 ? rgbaToHex('rgba(253, 253, 255, 0.1)') :
                    d === 20  ? rgbaToHex('rgba(252, 251, 255, 0.2)') :
                    d === 30  ? rgbaToHex('rgba(250, 250, 255, 0.3)') :
                    d === 40   ? rgbaToHex('rgba(249, 248, 255, 0.4)') :
                    d === 50  ? rgbaToHex('rgba(247, 247, 255, 0.5)') :
                    d === 60   ? rgbaToHex('rgba(246, 245, 255, 0.75)') : 
                    d === 70   ? rgbaToHex('rgba(244, 244, 255, 1)') :
                    d === 80   ? rgbaToHex('rgba(243, 242, 255, 1)') :
                    d === 90   ? rgbaToHex('rgba(242, 241, 255, 1)') :                    
                    rgbaToHex('rgba(240, 240, 255, 1)');
                  }

            function getColor_W(d){
                return d === 1 ? rgbaToHex('rgba(255,255,255, 0)') :
                    d === 5 ? rgbaToHex('rgba(238,206,206, 0.4)') :
                    d === 15  ? rgbaToHex('rgba(179,100,188, 0.7)') :
                    d === 25  ? rgbaToHex('rgba(63,33,59, 0.8)') :
                    d === 50   ? rgbaToHex('rgba(116,76,172, 0.9)') :
                    d === 100  ? rgbaToHex('rgba(70,0,175,1)') :                                       
                    rgbaToHex('rgba(13,17,38,1)'); 
            }
            //reference:view-source:https://leafletjs.com/SlavaUkraini/examples/choropleth/example.html
            //https://www.youtube.com/watch?v=758XGTcU38Y&t=953s
            //https://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3
      
            

             var legend = L.control({position: 'bottomright'});
             legend.onAdd = function (map) {
                    //style:style;
                    grades = [1080,1060,1040,1020,1010,1000,980,960];
                    var div = L.DomUtil.create('div', 'info legend');
                    labels = ['<strong>Pressure/hPa</strong>'];                 
                    for (var i = 0; i < grades.length; i++) {
                        div.innerHTML +=
                        labels.push(
                            '<i style="background:' + getColor(grades[i] + 1) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                        grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '&nbsp' : '-'));
                    }
                    div.innerHTML = labels.join('<br>');                    
                    return div;
            }; 
             //reference:view-source:https://leafletjs.com/SlavaUkraini/examples/choropleth/example.html
             //reference:https://gis.stackexchange.com/questions/193161/add-legend-to-leaflet-map
       
        
            

            var legend2 = L.control({position: 'bottomright'});
            legend2.onAdd = function (map) {
                //style:style2;                
                grades = [-65,-55,-45,-40,-30,-20,-10,0,10,20,25,30];
                var div = L.DomUtil.create('div', 'info legend');
                var labels =  ['<strong>Temperature/°C</strong>'];
                           
                for (var i = 0; i < grades.length; i++) {

                    div.innerHTML +=
                    labels.push(
                        '<i style="background:' + getColor_T(grades[i]) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                    (grades[i]  + '&nbsp&nbsp&nbsp'));
                /*     div.innerHTML +=  
                    '<i style="background:' + getColor_T(grades[i]) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                    (grades[i] + '&nbsp' + '°C' + '&nbsp&nbsp&nbsp'+'<br>'); */                 
                                     
                }  
                div.innerHTML = labels.join('<br>');                    
                return div;                         
               
            };
             //reference:view-source:https://leafletjs.com/SlavaUkraini/examples/choropleth/example.html
             //reference:https://gis.stackexchange.com/questions/193161/add-legend-to-leaflet-map


            var legend3 = L.control({position: 'bottomright'});
            legend3.onAdd = function (map) {
                //style:style2;                
                grades = [0,10,20,30,40,50,60,70,80,90,100];
                var div = L.DomUtil.create('div', 'info legend');
                var labels =  ['<strong>Cloud/°C</strong>'];
                           
                for (var i = 0; i < grades.length; i++) {

                   
                    div.innerHTML +=
                        labels.push(
                            '<i style="background:' + getColor_C(grades[i] + 1) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                        grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '&nbsp' : '-'));
                /*     div.innerHTML +=  
                    '<i style="background:' + getColor_T(grades[i]) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                    (grades[i] + '&nbsp' + '°C' + '&nbsp&nbsp&nbsp'+'<br>'); */                 
                                     
                }  
                div.innerHTML = labels.join('<br>');                    
                return div;                         
               
            };


            var legend4 = L.control({position: 'bottomright'});
            legend4.onAdd = function (map) {
                //style:style2;                
                grades = [1,5,15,25,50,100,200];
                var div = L.DomUtil.create('div', 'info legend');
                var labels =  ['<strong>Wind Speed/m/s</strong>'];
                           
                for (var i = 0; i < grades.length; i++) {

                   
                    div.innerHTML +=
                        labels.push(
                            '<i style="background:' + getColor_W(grades[i] + 1) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                        grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '&nbsp' : '-'));
                /*     div.innerHTML +=  
                    '<i style="background:' + getColor_T(grades[i]) + '">&nbsp&nbsp&nbsp&nbsp&nbsp</i> ' +
                    (grades[i] + '&nbsp' + '°C' + '&nbsp&nbsp&nbsp'+'<br>'); */                 
                                     
                }  
                div.innerHTML = labels.join('<br>');                    
                return div;                         
               
            };


           var baseLayers = {        
            'Base':defaultmap                             
                
            };

            var overlayMaps = { 
                'Satellite':satellite,                             
                'PressureLayer':PressureLayer,                
                'TemperatureLayer':TemperatureLayer,
                'cloudsLayer':cloudsLayer,
                'PrecipitationLayer':PrecipitationLayer,
                'WindSpeedLayer':WindSpeedLayer,                
            };
                



            L.control.layers(baseLayers, overlayMaps, {
                collapsed:true,
                position:'topright'
            }).addTo(map);
           
            
            currentLegend = legend2;
            map.on('overlayadd', function (eventLayer) {
            if (eventLayer.name === 'PressureLayer') {
                map.closePopup()
                map.removeControl(currentLegend );
                currentLegend = legend;
                legend.addTo(map);
                
                map.on('click',function(e){
                    var lat = e.latlng.lat
                    var lon = e.latlng.lng                
                    var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                    
                    fetch(URL)
                    .then(res => res.json()).then(data =>{
                        Pressure = data.main.pressure;                        
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"<br>Pressure: "+ Pressure +"hPa")
                        .openOn(map);
                                        
                        //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng + ",Pressure:" + Pressure)                    
                    }) 
                });
            }
            else if  (eventLayer.name === 'TemperatureLayer') {
                map.closePopup()
                map.removeControl(currentLegend);
                currentLegend = legend2;
                legend2.addTo(map);
              
                map.on('click',function(e){
                    var lat = e.latlng.lat
                    var lon = e.latlng.lng                
                    var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                    
                    fetch(URL)
                    .then(res => res.json()).then(data =>{
                        Temperature = data.main.temp - 273.15;
                        Temp = Temperature.toFixed(3);                        
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"<br>Temprature: "+ Temp +"°C")
                        .openOn(map);
                                        
                        //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng + ",Pressure:" + Pressure)                    
                    }) 
                });
            } 

            else if  (eventLayer.name === 'PrecipitationLayer') {
             
             map.removeControl(currentLegend );
             map.closePopup();            
            }
           
            
            else if  (eventLayer.name === 'cloudsLayer') {
                map.closePopup()
                map.removeControl(currentLegend );
               /*  currentLegend = legend3;
                legend3.addTo(map);  */
                map.on('click',function(e){
                    var lat = e.latlng.lat
                    var lon = e.latlng.lng                
                    var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                    
                    fetch(URL)
                    .then(res => res.json()).then(data =>{
                        Cloud = data.clouds.all;
                        console.log(Cloud)                                               
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"<br>Cloud: "+ Cloud +"%")
                        .openOn(map);
                                        
                        //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng + ",Pressure:" + Pressure)                    
                    }) 
                });
            } 
            
            else if  (eventLayer.name === 'WindSpeedLayer') {
                map.closePopup()
                map.removeControl(currentLegend );
                /* currentLegend = legend4;
                legend4.addTo(map);  */
                map.on('click',function(e){
                    var lat = e.latlng.lat
                    var lon = e.latlng.lng                
                    var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                    
                    fetch(URL)
                    .then(res => res.json()).then(data =>{
                        Wind = data.wind.speed;
                        console.log(Wind)                                               
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"<br>Wind Speed: "+ Wind +"m/s")
                        .openOn(map);
                                        
                        //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng + ",Pressure:" + Pressure)                    
                    }) 
                });
            } 

            else if  (eventLayer.name === 'Satellite') {
             
             map.removeControl(currentLegend );
             map.closePopup()
             map.on('click',function(e){
                 var lat = e.latlng.lat
                 var lon = e.latlng.lng                
                 var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                 
                 fetch(URL)
                    .then(res => res.json()).then(data =>{
                        var Pressure = data.main.pressure; 
                        var Temperature = data.main.temp - 273.15;
                        var Temp = Temperature.toFixed(3);
                        var humidity=data.main.humidity;
                        var visibility=data.visibility;
                        var wind=data.wind.speed;
                        var condition=data.weather[0].main;                       
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"&nbsp&nbsp"+condition+"<p>Pressure: "+ Pressure +"hPa"+"<p>Temperature:"+Temp+"°C"+"<p>Humidity:"+humidity+"%"+"<p>Visibility:"+visibility+"m"+"<p>Wind:"+wind+"m/s")
                        .openOn(map);                   
                                        
                        
                    }) 
             });
         }



 

        })

      


        /* map.on('baselayerchange', function(eventLayer) {
            map.removeControl(currentLegend );

            map.on('click',function(e){
                    var lat = e.latlng.lat
                    var lon = e.latlng.lng                
                    var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                    
                    fetch(URL)
                    .then(res => res.json()).then(data =>{
                        var Pressure = data.main.pressure; 
                        var Temperature = data.main.temp - 273.15;
                        var Temp = Temperature.toFixed(3);
                        var humidity=data.main.humidity;
                        var visibility=data.visibility;
                        var wind=data.wind.speed;
                        var condition=data.weather[0].main;                       
                        var popup = L.popup();
                        popup
                        .setLatLng(e.latlng)
                        .setContent(e.latlng.toString()+"&nbsp&nbsp"+condition+"<p>Pressure: "+ Pressure +"hPa"+"<p>Temperature:"+Temp+"°C"+"<p>Humidity:"+humidity+"%"+"<p>Visibility:"+visibility+"m"+"<p>Wind:"+wind+"m/s")
                        .openOn(map);                   
                                        
                        
                    }) 
                });
        
        
        }); */


          //reference:http://jsfiddle.net/FranceImage/X678g/
          //reference:https://stackoverflow.com/questions/59169322/how-can-i-use-the-event-overlayadd-layers-in-leaflet
    
            //reference:https://stackoverflow.com/questions/8550286/how-to-get-latitude-longitude-onclick-of-a-map-in-google-maps-api-v3-javascript
            //reference:https://leafletjs.com/SlavaUkraini/examples/quick-start/
            //reference:https://stackoverflow.com/questions/12460378/how-to-get-json-from-url-in-javascript
            //reference:https://www.youtube.com/watch?v=6trGQWzg2AI&t=3043s

            var currentdate = new Date();          
            document.getElementById('currenttime').innerHTML=currentdate;   


            function SearchByLocation(){
                infoneed=[]

                var Lat = document.getElementById('lat').value;
                var Long = document.getElementById('long').value;

                map.setView([Lat,Long],10)
                infoneed=[];

                var URL = `https://api.openweathermap.org/data/2.5/weather?lat=${Lat}&lon=${Long}&appid=81a0975bb08b576cee4eb056e8ce1b42`;
                fetch(URL)
                .then(res => res.json()).then(data =>{
                    var Pressure = data.main.pressure;
                    var Temperature = data.main.temp - 273.15;
                    var Temp = Temperature.toFixed(3);
                    var humidity=data.main.humidity;
                    var visibility=data.visibility;
                    var wind=data.wind.speed;
                    var condition=data.weather[0].main;
                    var iconid=data.weather[0].icon;
                    console.log(iconid)
                    console.log(humidity)
                    console.log(visibility)
                    console.log(wind)
                    console.log(condition)
                    var iconURL=`http://openweathermap.org/img/wn/${iconid}@4x.png`
                    var iconImg = document.getElementById('iconImg');
                    iconImg.src = iconURL;
                    // reference(for where to get weather icon and how to import weather icon):https://www.youtube.com/watch?v=nGVoHEZojiQ&t=880s
                    //         https://openweathermap.org/weather-conditions#How-to-get-icon-URL
                    // reference(for how to pass image source url to html):https://stackoverflow.com/questions/55123762/declare-a-variable-and-use-it-in-html

                    infoneed=[Lat,Long,Pressure,Temp,humidity,visibility,wind,condition];
                    console.log(infoneed)
                    popup = "Latitude:" + Lat + ",Longitude: " + Long + ",Pressure:" + Pressure+"hPa, Temprature: "+ Temp +"°C";

               /*      L.marker([Lat, Long]).addTo(map)
                            .bindPopup(popup)
                            .openPopup(); */

                    document.getElementById("locTemp").innerHTML = Temp;
                    document.getElementById("locPressure").innerHTML = Pressure;
                    document.getElementById("locwind").innerHTML = wind;
                    document.getElementById("lochumidity").innerHTML = humidity;
                    document.getElementById("locvisibility").innerHTML = visibility;
                    document.getElementById("loccondition").innerHTML = condition;

                    function ClearSection(){
                        map.removeLayer(marker);
                        document.location.reload()
                    }
                   
                })



                document.getElementById("LocLatitude").innerHTML = Lat;
                document.getElementById("LocLongitude").innerHTML = Long;




            }




            function SearchByCityname(){

                var Cityname = document.getElementById('CityN').value;
                var URL = `https://api.openweathermap.org/data/2.5/weather?q=${Cityname}&appid=81a0975bb08b576cee4eb056e8ce1b42`;

                fetch(URL)
                .then(res => res.json()).then(data =>{
                    var Lat=data.coord.lat;
                    var Long=data.coord.lon;
                    var Pressure = data.main.pressure;
                    var Temperature = data.main.temp - 273.15;
                    var Temp = Temperature.toFixed(3);
                    var humidity=data.main.humidity;
                    var visibility=data.visibility;
                    var wind=data.wind.speed;
                    var condition=data.weather[0].main;

                    var iconid=data.weather[0].icon;
                    console.log(data.weather.length)
                    console.log(iconid)
                    console.log(humidity)
                    console.log(visibility)
                    console.log(wind)
                    console.log(Lat)
                    console.log(Long)
                    var iconURL=`http://openweathermap.org/img/wn/${iconid}@4x.png`
                    var iconImgC = document.getElementById('iconImgC');
                    iconImgC.src = iconURL;
                    console.log(iconURL)
                    // reference(for where to get weather icon and how to import weather icon):https://www.youtube.com/watch?v=nGVoHEZojiQ&t=880s
                    //         https://openweathermap.org/weather-conditions#How-to-get-icon-URL
                    // reference(for how to pass image source url to html):https://stackoverflow.com/questions/55123762/declare-a-variable-and-use-it-in-html

                    popup = "City:" + Cityname + "Latitude:" + Lat + ",Longitude: " + Long + ",Pressure:" + Pressure+"hPa, Temprature: "+ Temp +"°C";

                   /*  L.marker([Lat, Long]).addTo(map)
                             .bindPopup(popup)
                             .openPopup(); */

                     document.getElementById("locTempC").innerHTML = Temp;
                     document.getElementById("locPressureC").innerHTML = Pressure;
                     document.getElementById("locwindC").innerHTML = wind;
                     document.getElementById("lochumidityC").innerHTML = humidity;
                     document.getElementById("locvisibilityC").innerHTML = visibility;
                     document.getElementById("locconditionC").innerHTML = condition;
                     map.setView([Lat,Long],10)

                     function ClearSection(){
                        map.removeLayer(marker);
                        document.location.reload()
                    }

                })
                document.getElementById("loccitynameC").innerHTML = Cityname;





            }


            
            var currentdate = new Date();          
            document.getElementById('currenttime').innerHTML=currentdate;        
            //reference:(for displaying current time on html)https://www.howtocodeschool.com/2020/05/display-current-date-and-time-using-html-javascript.html
            var dayofweek = currentdate.getDay();            
            dateinfo=[]
            date=currentdate;
            var dayofweekupdate=dayofweek+0;
            weekdaylist=['Sunday','Monday','Tuesday','Wednesday','Thursday','Firday','Saturday']
            for(var i = 1; i < 8; i++){
                // var dateupdate = date.getDate()+i;                                       
                                 
                if(dayofweekupdate>=6){
                   var dayofweekupdate = dayofweekupdate+1-7;
                   console.log(dayofweekupdate)
                   dayname=weekdaylist[dayofweekupdate];
                }else if(dayofweekupdate<7) {
                    var dayofweekupdate = dayofweekupdate +1;
                    console.log(dayofweekupdate)
                    dayname=weekdaylist[dayofweekupdate];
                }             
                                    
                dateinfo.push(dayname) 
                //dayofweekupdate = dayofweekupdate+0;  

               
                            
                
            }


            
            function DailyForcast(){
                infoneed=[]

                var Lat = document.getElementById('lat').value;
                var Long = document.getElementById('long').value;
                map.setView([Lat,Long],10)                
                var URL=`https://api.openweathermap.org/data/2.5/onecall?lat=${Lat}&lon=${Long}&exclude=minutely,hourly,current,alerts&appid=81a0975bb08b576cee4eb056e8ce1b42`

                dailyweather=[];
                sevendays=[];
                console.log(URL)
                fetch(URL)
                .then(res => res.json()).then(data =>{

                    for(var i = 1; i < 8; i++){
                        var daily=data.daily[i];   
                        console.log(daily)  
                        
                        var Temperature = daily.temp.max - 273.15;
                        var MaxTem = Temperature.toFixed(3);
                        var Temperature2 = daily.temp.min - 273.15;
                        var MinTem = Temperature2.toFixed(3);
                        var wind=daily.wind_speed;
                        var iconid=daily.weather[0].icon;                        
                        var iconURL=`http://openweathermap.org/img/wn/${iconid}@2x.png`  
                        var condition=daily.weather[0].main;
                        var uvi=daily.uvi;
                        var humidity=daily.humidity;
                        var day=dateinfo[i-1];
                        dailyweather=[day,condition,MinTem,MaxTem,wind,iconid,iconURL,uvi,humidity]
                        sevendays.push(dailyweather)                   
                        console.log(data.daily[i])
                        console.log(dailyweather)                     
                        
                    }
                    unitinfo = ["&nbsp","&nbsp","Min Temperature[°C]","Max Temperature[°C]","Wind Speed[m/s]","UVI"]
                    var iconImg1 = document.getElementById('iconImg1');
                        iconImg1.src = sevendays[0][6];
                    var iconImg2 = document.getElementById('iconImg2');
                        iconImg2.src = sevendays[1][6];
                    var iconImg3 = document.getElementById('iconImg3');
                        iconImg3.src = sevendays[2][6];
                    var iconImg4 = document.getElementById('iconImg4');
                        iconImg4.src = sevendays[3][6];
                    var iconImg5 = document.getElementById('iconImg5');
                        iconImg5.src = sevendays[4][6];
                    var iconImg6 = document.getElementById('iconImg6');
                        iconImg6.src = sevendays[5][6];
                    var iconImg7 = document.getElementById('iconImg7');
                        iconImg7.src = sevendays[6][6];

                    unit = unitinfo[0]+"<p>"+"<p>"+unitinfo[1]+"<p>"+unitinfo[2]+"<p>"+unitinfo[3]+"<p>"+unitinfo[4]+"<p>"+unitinfo[5];
                    document.getElementById("unit").innerHTML = unit;

                    var day1 = [sevendays[0][0],sevendays[0][1],sevendays[0][2],sevendays[0][3],sevendays[0][4],sevendays[0][7]];                   
                    var day2 = [sevendays[1][0],sevendays[1][1],sevendays[1][2],sevendays[1][3],sevendays[1][4],sevendays[1][7]];
                    var day3 = [sevendays[2][0],sevendays[2][1],sevendays[2][2],sevendays[2][3],sevendays[2][4],sevendays[2][7]];
                    var day4 = [sevendays[3][0],sevendays[3][1],sevendays[3][2],sevendays[3][3],sevendays[3][4],sevendays[3][7]];
                    var day5 = [sevendays[4][0],sevendays[4][1],sevendays[4][2],sevendays[4][3],sevendays[4][4],sevendays[4][7]]; 
                    var day6 = [sevendays[5][0],sevendays[5][1],sevendays[5][2],sevendays[5][3],sevendays[5][4],sevendays[5][7]];
                    var day7 = [sevendays[6][0],sevendays[6][1],sevendays[6][2],sevendays[6][3],sevendays[6][4],sevendays[6][7]];
                    day1fullinfo = day1[0]+"<p>"+"<p>"+day1[1]+"<p>"+day1[2]+"<p>"+day1[3]+"<p>"+day1[4]+"<p>"+day1[5];
                    document.getElementById("day1").innerHTML = day1fullinfo;
                    // reference:(for to present value from list vertically):https://stackoverflow.com/questions/39774198/display-javascript-array-in-vertical-list
                    day2fullinfo = day2[0]+"<p>"+"<p>"+day2[1]+"<p>"+day2[2]+"<p>"+day2[3]+"<p>"+day2[4]+"<p>"+day1[5];
                    document.getElementById("day2").innerHTML = day2fullinfo;
                    day3fullinfo = day3[0]+"<p>"+"<p>"+day3[1]+"<p>"+day3[2]+"<p>"+day3[3]+"<p>"+day3[4]+"<p>"+day2[5];
                    document.getElementById("day3").innerHTML = day3fullinfo;
                    day4fullinfo = day4[0]+"<p>"+"<p>"+day4[1]+"<p>"+day4[2]+"<p>"+day4[3]+"<p>"+day4[4]+"<p>"+day3[5];
                    document.getElementById("day4").innerHTML = day4fullinfo;
                    day5fullinfo = day5[0]+"<p>"+"<p>"+day5[1]+"<p>"+day5[2]+"<p>"+day5[3]+"<p>"+day5[4]+"<p>"+day4[5];
                    document.getElementById("day5").innerHTML = day5fullinfo;
                    day6fullinfo = day6[0]+"<p>"+"<p>"+day6[1]+"<p>"+day6[2]+"<p>"+day6[3]+"<p>"+day6[4]+"<p>"+day5[5];
                    document.getElementById("day6").innerHTML = day6fullinfo;
                    day7fullinfo = day7[0]+"<p>"+"<p>"+day7[1]+"<p>"+day7[2]+"<p>"+day7[3]+"<p>"+day7[4]+"<p>"+day6[5];
                    document.getElementById("day7").innerHTML = day7fullinfo;
                    
                    
                    

                })

                //L.marker([Lat, Long]).addTo(map)
                map.setView([Lat,Long],10)


            }

            function hourlyForcast(){
                infoneed=[]

                var Lat = document.getElementById('lat').value;
                var Long = document.getElementById('long').value;
                map.setView([Lat,Long],10)                
                var URL=`https://api.openweathermap.org/data/2.5/onecall?lat=${Lat}&lon=${Long}&exclude=minutely,daily,current,alerts&appid=81a0975bb08b576cee4eb056e8ce1b42`
                var hournum = document.getElementById('hour').value;
                document.getElementById("FHhournum").innerHTML = hournum;
                
                console.log(hournum)
                dailyweather=[];
                sevendays=[];
                console.log(URL)
                fetch(URL)
                .then(res => res.json()).then(data =>{
                    console.log(data)
                    var i = hournum;
                    var hourly=data.hourly[i];
                    console.log(hourly)
                    var Temperature = hourly.temp - 273.15;
                    var Temp = Temperature.toFixed(3);
                    var humidity=hourly.humidity;
                    var visibility=hourly.visibility;
                    var wind=hourly.wind_speed;
                    var condition=hourly.weather[0].main;
                    var iconid=hourly.weather[0].icon;
                    var uvi=hourly.uvi;
                    var Pressure = hourly.pressure;
                
                    var iconURLH=`http://openweathermap.org/img/wn/${iconid}@4x.png`
                    var iconImgH = document.getElementById('iconImgH');
                    iconImgH.src = iconURLH;

                    // L.marker([Lat, Long]).addTo(map)
                    //         .bindPopup(popup)
                    //         .openPopup();

                    
                    document.getElementById("FHTemp").innerHTML = Temp;
                    document.getElementById("FHPressure").innerHTML = Pressure;
                    document.getElementById("FHwind").innerHTML = wind;
                    document.getElementById("FHhumidity").innerHTML = humidity;
                    document.getElementById("FHvisibility").innerHTML = visibility;
                    document.getElementById("FHcondition").innerHTML = condition;
                    document.getElementById("FHuvi").innerHTML = uvi;

                    function ClearSection(){
                        map.removeLayer(marker);
                        document.location.reload()
                    }

                    

                })
                document.getElementById("HRLatitude").innerHTML = Lat;
                document.getElementById("HRLongitude").innerHTML = Long;
                // L.marker([Lat, Long]).addTo(map)
                map.setView([Lat,Long],10)

 

            }



            document.getElementById('dailyforcast').addEventListener("click", function() {
                document.querySelector('.popupBackground3').style.display = "flex";
            });

            document.querySelector('.closeWindow3').addEventListener("click", function() {
                document.querySelector('.popupBackground3').style.display = "none";
            });


            document.getElementById('Search').addEventListener("click", function() {
                document.querySelector('.popupBackground').style.display = "flex";
            });

            document.querySelector('.closeWindow').addEventListener("click", function() {
                document.querySelector('.popupBackground').style.display = "none";
            });

            document.getElementById('Query').addEventListener("click", function() {
                document.querySelector('.popupBackground2').style.display = "flex";
            });

            document.querySelector('.closeWindow2').addEventListener("click", function() {
                document.querySelector('.popupBackground2').style.display = "none";
            });

            document.getElementById('hourlyforcast').addEventListener("click", function() {
                document.querySelector('.popupBackground4').style.display = "flex";
            });

            document.querySelector('.closeWindow4').addEventListener("click", function() {
                document.querySelector('.popupBackground4').style.display = "none";
            });
            // reference(for how to add a popup window by click and how to close a popup window is learned from):https://www.youtube.com/watch?v=gLWIYk0Sd38&t=191s







        
        </script>
    </body>
</html>

